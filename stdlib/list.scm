; Guage Standard Library: List Operations
; Pure symbolic names, named parameters (converted to De Bruijn internally)

; ============================================================================
; Core List Operations
; ============================================================================

; â†¦ :: (Î± â†’ Î²) â†’ [Î±] â†’ [Î²]
; Map - transform each element using function
(â‰” â†¦ (Î» (Æ’) (Î» (lst)
  (? (âˆ…? lst)
     âˆ…
     (âŸ¨âŸ© (Æ’ (â— lst)) ((â†¦ Æ’) (â–· lst)))))))

; âŠ² :: (Î± â†’ ğ”¹) â†’ [Î±] â†’ [Î±]
; Filter - keep only elements satisfying predicate
(â‰” âŠ² (Î» (pred) (Î» (lst)
  (? (âˆ…? lst)
     âˆ…
     (? (pred (â— lst))
        (âŸ¨âŸ© (â— lst) ((âŠ² pred) (â–· lst)))
        ((âŠ² pred) (â–· lst)))))))

; âŠ•â† :: (Î± â†’ Î² â†’ Î±) â†’ Î± â†’ [Î²] â†’ Î±
; Fold-left - accumulate from left to right
(â‰” âŠ•â† (Î» (Æ’) (Î» (acc) (Î» (lst)
  (? (âˆ…? lst)
     acc
     (((âŠ•â† Æ’) ((Æ’ acc) (â— lst))) (â–· lst)))))))

; âŠ•â†’ :: (Î± â†’ Î² â†’ Î²) â†’ [Î±] â†’ Î² â†’ Î²
; Fold-right - accumulate from right to left
(â‰” âŠ•â†’ (Î» (Æ’) (Î» (lst) (Î» (acc)
  (? (âˆ…? lst)
     acc
     ((Æ’ (â— lst)) (((âŠ•â†’ Æ’) (â–· lst)) acc)))))))

; ============================================================================
; List Utilities
; ============================================================================

; # :: [Î±] â†’ â„•
; Length - count elements
(â‰” # (Î» (lst)
  (((âŠ•â† (Î» (acc) (Î» (_) (âŠ• acc #1)))) #0) lst)))

; â§º :: [Î±] â†’ [Î±] â†’ [Î±]
; Append - concatenate two lists
(â‰” â§º (Î» (lst2) (Î» (lst1)
  (((âŠ•â†’ âŸ¨âŸ©) lst1) lst2))))

; â‡„ :: [Î±] â†’ [Î±]
; Reverse - reverse order
(â‰” â‡„ (Î» (lst)
  (((âŠ•â† (Î» (acc) (Î» (x) (âŸ¨âŸ© x acc)))) âˆ…) lst)))

; ============================================================================
; List Slicing
; ============================================================================

; â†‘ :: â„• â†’ [Î±] â†’ [Î±]
; Take - first n elements
(â‰” â†‘ (Î» (n) (Î» (lst)
  (? (â‰¡ n #0)
     âˆ…
     (? (âˆ…? lst)
        âˆ…
        (âŸ¨âŸ© (â— lst) ((â†‘ (âŠ– n #1)) (â–· lst))))))))

; â†“ :: â„• â†’ [Î±] â†’ [Î±]
; Drop - skip first n elements
(â‰” â†“ (Î» (n) (Î» (lst)
  (? (â‰¡ n #0)
     lst
     (? (âˆ…? lst)
        âˆ…
        ((â†“ (âŠ– n #1)) (â–· lst)))))))

; ============================================================================
; List Combinators
; ============================================================================

; âŠ¼ :: [Î±] â†’ [Î²] â†’ [âŸ¨Î± Î²âŸ©]
; Zip - pair corresponding elements
(â‰” âŠ¼ (Î» (lst2) (Î» (lst1)
  (? (âˆ…? lst1)
     âˆ…
     (? (âˆ…? lst2)
        âˆ…
        (âŸ¨âŸ© (âŸ¨âŸ© (â— lst1) (â— lst2)) ((âŠ¼ (â–· lst2)) (â–· lst1))))))))

; âˆƒ :: (Î± â†’ ğ”¹) â†’ [Î±] â†’ ğ”¹
; Exists (any) - test if any element satisfies predicate
(â‰” âˆƒ (Î» (pred) (Î» (lst)
  (? (âˆ…? lst)
     #f
     (? (pred (â— lst))
        #t
        ((âˆƒ pred) (â–· lst)))))))

; âˆ€ :: (Î± â†’ ğ”¹) â†’ [Î±] â†’ ğ”¹
; Forall (all) - test if all elements satisfy predicate
(â‰” âˆ€ (Î» (pred) (Î» (lst)
  (? (âˆ…? lst)
     #t
     (? (pred (â— lst))
        ((âˆ€ pred) (â–· lst))
        #f)))))

; ============================================================================
; List Search
; ============================================================================

; âˆˆ :: Î± â†’ [Î±] â†’ ğ”¹
; Element of (contains) - test membership
(â‰” âˆˆ (Î» (elem) (Î» (lst)
  ((âˆƒ (Î» (x) (â‰¡ elem x))) lst))))

; ============================================================================
; List Building
; ============================================================================

; â‹¯ :: â„• â†’ â„• â†’ [â„•]
; Range - numbers from start to end (exclusive)
(â‰” â‹¯ (Î» (end) (Î» (start)
  (? (â‰¥ start end)
     âˆ…
     (âŸ¨âŸ© start ((â‹¯ end) (âŠ• start #1)))))))

; âŠšâŠš :: â„• â†’ Î± â†’ [Î±]
; Replicate - n copies of value
(â‰” âŠšâŠš (Î» (val) (Î» (n)
  (? (â‰¡ n #0)
     âˆ…
     (âŸ¨âŸ© val ((âŠšâŠš val) (âŠ– n #1)))))))

; ============================================================================
; Examples
; ============================================================================

; Sum: (âŠ•â† âŠ• #0 (âŸ¨âŸ© #1 (âŸ¨âŸ© #2 (âŸ¨âŸ© #3 âˆ…))))  ; â†’ #6
; Product: (âŠ•â† âŠ— #1 (âŸ¨âŸ© #2 (âŸ¨âŸ© #3 (âŸ¨âŸ© #4 âˆ…))))  ; â†’ #24
; Map double: (â†¦ (Î» (x) (âŠ— x #2)) (âŸ¨âŸ© #1 (âŸ¨âŸ© #2 (âŸ¨âŸ© #3 âˆ…))))
; Filter >5: (âŠ² (Î» (x) (> x #5)) (âŸ¨âŸ© #3 (âŸ¨âŸ© #7 (âŸ¨âŸ© #2 (âŸ¨âŸ© #9 âˆ…)))))
; Reverse: (â‡„ (âŸ¨âŸ© #1 (âŸ¨âŸ© #2 (âŸ¨âŸ© #3 âˆ…))))
; Range: (â‹¯ #5 #1)  ; â†’ (âŸ¨âŸ© #1 (âŸ¨âŸ© #2 (âŸ¨âŸ© #3 (âŸ¨âŸ© #4 âˆ…))))
; Length: (# (âŸ¨âŸ© #1 (âŸ¨âŸ© #2 (âŸ¨âŸ© #3 âˆ…))))  ; â†’ #3
