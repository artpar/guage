; Documentation Tests - Auto-generated user function documentation

; Simple function with one dependency
(≔ inc (λ (x) (⊕ x #1)))

; Query description
(⌂ (⌜ inc))
; Expected: symbol containing "Function using"

; Query type
(⌂∈ (⌜ inc))
; Expected: :α → β

; Query dependencies
(⌂≔ (⌜ inc))
; Expected: (:⊕ :⌜) or similar list

; Factorial - recursive function
(≔ ! (λ (n) (? (≡ n #0) #1 (⊗ n (! (⊖ n #1))))))

; Query factorial docs
(⌂ (⌜ !))
; Expected: symbol with description

(⌂∈ (⌜ !))
; Expected: :α → β

(⌂≔ (⌜ !))
; Expected: list with multiple symbols including :!

; Test the function works
(! #5)
; Expected: #120

; Fibonacci - another recursive function
(≔ fib (λ (n) (? (< n #2) n (⊕ (fib (⊖ n #1)) (fib (⊖ n #2))))))

(fib #7)
; Expected: #13

; Query fibonacci docs
(⌂ (⌜ fib))
(⌂∈ (⌜ fib))
(⌂≔ (⌜ fib))

; Const function - no dependencies
(≔ identity (λ (x) x))

(identity #42)
; Expected: #42

; Query identity docs
(⌂ (⌜ identity))
; Expected: "User-defined function" (no dependencies)

(⌂≔ (⌜ identity))
; Expected: ∅ or empty list

; Composed function
(≔ double (λ (x) (⊕ x x)))
(≔ quadruple (λ (x) (double (double x))))

(quadruple #3)
; Expected: #12

; Query composed function docs
(⌂ (⌜ quadruple))
; Should mention 'double' as dependency

(⌂≔ (⌜ quadruple))
; Should contain :double

; Query non-existent function
(⌂ (⌜ nonexistent))
; Expected: :no-documentation

(⌂∈ (⌜ nonexistent))
; Expected: :unknown-type

(⌂≔ (⌜ nonexistent))
; Expected: ∅

; Query primitive documentation
(⌂ (⌜ ⊕))
; Expected: "Add two numbers"

(⌂∈ (⌜ ⊕))
; Expected: "ℕ → ℕ → ℕ"

(⌂≔ (⌜ ⊕))
; Expected: ∅ (primitives have no dependencies)
