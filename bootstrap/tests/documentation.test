; Documentation Tests - Auto-generated user function documentation

; Simple function with one dependency
(define inc (lambda (x) (+ x #1)))

; Query description
(doc (quote inc))
; Expected: symbol containing "Function using"

; Query type
(doc-type (quote inc))
; Expected: :α -> β

; Query dependencies
(doc-deps (quote inc))
; Expected: (:+ :quote) or similar list

; Factorial - recursive function
(define ! (lambda (n) (if (equal? n #0) #1 (* n (! (- n #1))))))

; Query factorial docs
(doc (quote !))
; Expected: symbol with description

(doc-type (quote !))
; Expected: :α -> β

(doc-deps (quote !))
; Expected: list with multiple symbols including :!

; Test the function works
(! #5)
; Expected: #120

; Fibonacci - another recursive function
(define fib (lambda (n) (if (< n #2) n (+ (fib (- n #1)) (fib (- n #2))))))

(fib #7)
; Expected: #13

; Query fibonacci docs
(doc (quote fib))
(doc-type (quote fib))
(doc-deps (quote fib))

; Const function - no dependencies
(define identity (lambda (x) x))

(identity #42)
; Expected: #42

; Query identity docs
(doc (quote identity))
; Expected: "User-defined function" (no dependencies)

(doc-deps (quote identity))
; Expected: nil or empty list

; Composed function
(define double (lambda (x) (+ x x)))
(define quadruple (lambda (x) (double (double x))))

(quadruple #3)
; Expected: #12

; Query composed function docs
(doc (quote quadruple))
; Should mention 'double' as dependency

(doc-deps (quote quadruple))
; Should contain :double

; Query non-existent function
(doc (quote nonexistent))
; Expected: :no-documentation

(doc-type (quote nonexistent))
; Expected: :unknown-type

(doc-deps (quote nonexistent))
; Expected: nil

; Query primitive documentation
(doc (quote +))
; Expected: "Add two numbers"

(doc-type (quote +))
; Expected: "ℕ -> ℕ -> ℕ"

(doc-deps (quote +))
; Expected: nil (primitives have no dependencies)
